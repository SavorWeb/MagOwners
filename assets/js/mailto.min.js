!function(e,t){function o(o){o=o||"";var n=(e.location.protocol||t.location.protocol).replace(/[^a-zA-Z]+/g,"");return n="file"==n?"https":n,"app.squaresend.com"==e.location.hostname||"192.168.1.8"==e.location.hostname?n+"://"+e.location.hostname+("/"+o).replace(/\/\//,"/"):n+"://squaresend.com"+("/"+o).replace(/\/\//,"/")}function n(t){return e.encodeURIComponent?encodeURIComponent(t):escape(t)}function a(e){var t="";if("object"==typeof e){for(var o in e)o&&(t+=o+"="+n(e[o])+"&");t=t.replace(/\&$/,"")}return t}function c(t,o,n){"function"==typeof o&&(n=o,o={});var c,r=!1;c=e.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),c.onreadystatechange=function(){4==c.readyState&&200==c.status&&n(c.responseText)},r&&(c.onload=function(){n(c.responseText)});var s=a(o);c.open("POST",t,!0),c.setRequestHeader&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(s)}function r(e){return e?(e+"").replace(/<|>/g,""):""}var s={},i=e.JSON||{parse:function(){}},u="mailto",p="/";s.mailto=function(t,n){if("object"!=typeof t)throw"Data must be an object";var a,s,f=t.from.split("<");t.from.indexOf("<")>-1?(s=r(f[0])||"",a=r(f[1])||""):(s="",a=r(f[0])||"");var l={send:!0,mailto:!0,to:t.to||"",url:e.location.href,name:s||"",email:a||"",subject:t.subject||"(empty subject)",message:t.message||"(empty message)"};c(o(p+u+":"+t.to),l,function(e){var t=i.parse(e);"error"==t.type||"notice"==t.type?n({error:t.action}):"success"==t.type&&n({success:t.action})})},e.Squaresend=s}(window,document);